<div class="container page-container min-vh-100 py-4">

  <div class="row g-3 align-items-center mb-5 filter-bar">

    <div class="col-12 col-md-6">
      <div class="input-group-custom position-relative w-100">
        <i class="bi bi-search position-absolute top-50 start-0 translate-middle-y ms-3 text-muted"></i>
        <input type="search" class="form-control ps-5 rounded-pill border-0 shadow-sm custom-input"
          placeholder="Search products..." (input)="onSearch($event)">
      </div>
    </div>

    <div class="col-6 col-md-3">
      <div class="input-group-custom position-relative w-100">
        <i class="bi bi-funnel position-absolute top-50 start-0 translate-middle-y ms-3 text-muted"></i>
        <select #categorySelect [value]="currentCategoryId" (change)="OnselectCategory($event)"
          class="form-select ps-5 rounded-pill border-0 shadow-sm cursor-pointer custom-input">
          <option value="all">All Categories</option>
          @for (category of Categories; track category.id) {
          <option [value]="category.id">{{ category.name }}</option>
          }
        </select>
      </div>
    </div>

    <div class="col-6 col-md-3">
      <button
        class="btn btn-dark w-100 rounded-pill shadow-sm d-flex align-items-center justify-content-center gap-2 py-2"
        routerLink="add">
        <i class="bi bi-plus-lg"></i>
        <span class="d-none d-xl-inline">Add Product</span>
        <span class="d-inline d-xl-none">Add</span>
      </button>
    </div>

  </div>

  <div class="product-grid">
    @for (product of FilteredProducts.slice(0, visibleCount); track product.id) {
    <div class="grid-item align-items-center">
      <app-product [product]="product" (deleteevent)="onDeleteProduct($event)"></app-product>
    </div>
    }
  </div>

  @if (visibleCount < FilteredProducts.length) { <div class="text-center py-4">
    <button class="btn btn-outline-dark rounded-pill px-5 py-2 fw-bold" (click)="onLoadMore()">
      Load More <i class="bi bi-chevron-down ms-2"></i>
    </button>

    <p class="text-muted small mt-2">
      Showing {{ visibleCount > FilteredProducts.length ? FilteredProducts.length : visibleCount }}
      of {{ FilteredProducts.length }} products
    </p>
</div>
}

@if (FilteredProducts.length === 0) {
<div class="text-center py-5 empty-state fade-in">
  <div
    class="icon-box bg-white p-4 rounded-circle shadow-sm d-inline-flex mb-3 align-items-center justify-content-center">
    <i class="bi bi-box-seam text-muted display-4"></i>
  </div>
  <h5 class="text-dark fw-bold">No Products Found</h5>
  <p class="text-muted">Try adjusting your search or category filter.</p>
</div>
}

</div>